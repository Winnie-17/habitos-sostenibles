<!DOCTYPE html>
<html lang="es">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>H√°bitos sostenibles</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <h1 class="titulo">H√°bitos sostenibles</h1>
    <p class="descripcion">Sistema de seguimiento de h√°bitos sostenibles personalizados.</p>
  </header>

  <main class="fade-in">
    <!-- A√±adir h√°bito -->
    <section>
      <form method="POST" action="/agregar">
        <input type="text" name="nuevo_habito" placeholder="Nuevo h√°bito..." required>
        <button type="submit" class="btn">A√±adir h√°bito</button>
      </form>
    </section>

    <!-- Lista de h√°bitos y registrar -->
    <section>
      <form method="POST" action="/registrar">
        {% for habito in lista %}
        <div class="check">
          <input type="checkbox" name="habito_{{ habito.id }}" id="habito_{{ habito.id }}">
          <label for="habito_{{ habito.id }}">{{ habito.nombre }}</label>
        </div>
        {% endfor %}
        <button type="submit" class="btn">Registrar</button>
      </form>
    </section>

    <!-- Botones de eliminar -->
    <section>
      <h3>Eliminar h√°bitos</h3>
      {% for habito in lista %}
      <form method="POST" action="/eliminar/{{ habito.id }}" style="display:inline-block; margin: 5px;">
        <span>{{ habito.nombre }}</span>
        <button type="submit" class="btn eliminar">üóëÔ∏è</button>
      </form>
      {% endfor %}
    </section>

    <!-- Historial -->
    <section>
      <h2>Historial</h2>
      <table>
        <thead><tr><th>Fecha</th><th>H√°bitos</th></tr></thead>
        <tbody>
          {% for r in registros %}
          <tr>
            <td>{{ r.fecha }}</td>
            <td>
              {% for n,v in r.datos.items() %}
              {{ n }}: {{ '‚úÖ' if v else '‚ùå' }}<br>
              {% endfor %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>

    <nav class="menu">
      <a href="{{ url_for('aplicaciones') }}">Aplicaci√≥n</a>
      <a href="{{ url_for('reflexion') }}">Reflexi√≥n</a>
      <a href="{{ url_for('codigo') }}">C√≥digo</a>
    </nav>
  </main>
</body>
</html>
